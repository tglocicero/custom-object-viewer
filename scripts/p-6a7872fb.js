import{h as e}from"./p-2f2b281e.js";import{d as t,j as a}from"./p-9158fc11.js";const n=[{label:"Pin Left",value:"left"},{label:"Pin Right",value:"right"},{label:"Unpin",value:null}];var r;!function(e){e.SELECT="Select",e.DESELECT="Deselect"}(r||(r={}));const s=["contains","ends-with","equals","starts-with"];var l;!function(e){e.cell="anj-cell",e.header="anj-header-cell",e.number="anj-datatype-number",e.overflowCell="anj-overflow-cell",e.overflowHeader="anj-overflow-header",e.pinBorder="anj-pin-border",e.selectable="anj-selectable",e.selected="anj-selected-col",e.sorted="anj-sorted"}(l||(l={}));let i=0;class c{constructor(e){this.column=e}static classFromColumnName(e){return`anj-col-${e.replace(/\//g,"-")}`}static classFromPinned(e){if(e)return`anj-pinned-${e}`}static pinnedBorderClass(e,t){return e===t.lastLeftPinned||e===t.firstRightPinned?l.pinBorder:void 0}static columnHeaderClasses(e){return t(l.header,e.sortIndex>-1?l.sorted:void 0,"all"===e.overflow||"header"===e.overflow?l.overflowHeader:void 0,c.columnClasses(e))}static columnCellClasses(e){return t(l.cell,"all"===e.overflow||"cell"===e.overflow?l.overflowCell:void 0,c.columnClasses(e))}static columnAttributes(e,t,a){return{colspan:e.span,"data-column-index":t,"data-column-field":e.field,"data-row-key":a[e.table.rowKey]}}static columnClasses(e){return[c.classFromColumnName(e.name),c.classFromPinned(e.pinned),e.table.selectedColumnFields.includes(e.field)?l.selected:void 0,e.selectable?l.selectable:void 0,`anj-datatype-${e.dataType}`]}static generateColumnName(e,t){return(e||(t?t.split(" ").join("-"):`anj-anon-${i++}`)).toLowerCase()}static renderCell(e,t){if(!a(e[t.field]))return"";switch(t.dataType){case"boolean":return o(e[t.field]);case"date":return d(e[t.field],t);case"datetime":return u(e[t.field],t);case"number":return h(e[t.field],t);default:return"string"==typeof e[t.field]?`${e[t.field].substring(0,999)}`:`${e[t.field]}`}}static renderEdit(t,n){const s=this.translator||c.translator,l=c.validationAttrs(n.rules),i=c.renderHeader(n.field,n.caption);if(n.options)return e("anj-form-group",null,e("anj-select",Object.assign({},l,{placeholder:i,name:n.field,value:t[n.field]}),n.options.options.map(t=>e("anj-option",{value:n.options.valueKey?t[n.options.valueKey]:t},n.options.displayKey?t[n.options.displayKey]:t))));switch(n.dataType){case"boolean":const c=t[n.field]?`${s(r.DESELECT)}: ${n.name}`:`${s(r.SELECT)}: ${n.name}`;return e("anj-checkbox",{solo:!0,checked:t[n.field],name:n.field,"aria-label":c});case"date":return e("anj-form-group",null,e("anj-input",Object.assign({},l,{placeholder:i,name:n.field,value:d(t[n.field],n)}),e("anj-date-picker-toggle",null),e("anj-date-picker",null)));case"datetime":return e("anj-form-group",null,e("anj-input",Object.assign({},l,{placeholder:i,name:n.field,value:u(t[n.field],n)}),e("anj-datetime-picker-toggle",null),e("anj-datetime-picker",null)));default:const o=l.type?l.type:"string"===n.dataType?"text":n.dataType,h=a(t[n.field])?t[n.field]:"";return e("anj-form-group",null,e("anj-input",Object.assign({},l,{placeholder:i,name:n.field,type:o,value:h})))}}static validationAttrs(e){const t={};return e.forEach(e=>{switch(e.type){case"required":t.required=!0;break;case"email":t.type="email";break;default:t[e.type]=e.value}}),t}static renderHeader(e,t){return t||c.fieldToCaption(e)}static fieldToCaption(e){return e?e.split(/(?=[A-Z])/).join(" ").replace(/_/g," "):""}async contextMenu(){if(!this.column.pinnable)return;const e=(await this.column.table.columnMenu()).map(e=>(e.disabled=e.action===this.column.pinned,e));return e.length>0?e:void 0}async setOffset(e){this.cells().forEach(t=>this.setCellOffset(t,e))}async setWidth(e){this.column.width=e,this.cells().forEach(e=>this.setCellWidth(e))}async initCell(e,t){e&&(this.setCellOffset(e,t),"auto"!==this.column.width&&this.setCellWidth(e))}cells(){return Array.from(this.column.table.querySelectorAll(`.${c.classFromColumnName(this.column.name)}`))}setCellOffset(e,t){switch(this.column.pinned){case"left":e.style.left=t||`${this.calculateOffset(e)}px`;break;case"right":e.style.right=t||`${this.calculateOffset(e,!0)}px`;break;default:e.style.left="",e.style.right=""}}setCellWidth(e){e.style.minWidth="auto"===this.column.width||"0"===this.column.width?"":this.column.width,e.style.maxWidth="auto"===this.column.width||"0"===this.column.width?"":this.column.width,e.style.width=this.column.width}calculateOffset(e,t=!1){let a=0;const n=Array.from(e.parentElement.querySelectorAll(`.${c.classFromPinned(this.column.pinned)}`));t&&n.reverse();for(let r=0;r<n.length&&n[r]!==e;r++)a+=n[r].offsetWidth;return a}}c.translator=e=>e;const o=t=>t?e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},e("path",{d:"M6.61 11.89L3.5 8.78 2.44 9.84 6.61 14l8.95-8.95L14.5 4z"})):"",u=(e,t)=>{const a=new Date(e);return a.valueOf()?t.table.datetimeFormatter(a):""},d=(e,t)=>{const a=new Date(e);return a.valueOf()?t.table.dateFormatter(a):""},h=(e,t)=>a(e)?isNaN(e)?e:isNaN(e)?e:t.table.numberFormatter(e):"";export{c as C,s as F,n as a};